#include <stdio.h>

#include "text_display.h"
#include "platform_support.h"
#include "state.h"

const char font_data[] =
{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7E, 0x81, 0xA5, 0x81, 0xBD, 0x99, 0x81, 0x7E, 0x7E, 0xFF, 0xDB, 0xFF, 0xC3, 0xE7, 0xFF, 0x7E, 0x6C, 0xFE, 0xFE, 0xFE, 0x7C, 0x38, 0x10, 0x0, 0x10, 0x38, 0x7C, 0xFE, 0x7C, 0x38, 0x10, 0x0, 0x38, 0x7C, 0x38, 0xFE, 0xFE, 0x7C, 0x38, 0x7C, 0x10, 0x10, 0x38, 0x7C, 0xFE, 0x7C, 0x38, 0x7C, 0x0, 0x0, 0x18, 0x3C, 0x3C, 0x18, 0x0, 0x0, 0xFF, 0xFF, 0xE7, 0xC3, 0xC3, 0xE7, 0xFF, 0xFF, 0x0, 0x3C, 0x66, 0x42, 0x42, 0x66, 0x3C, 0x0, 0xFF, 0xC3, 0x99, 0xBD, 0xBD, 0x99, 0xC3, 0xFF, 0xF, 0x7, 0xF, 0x7D, 0xCC, 0xCC, 0xCC, 0x78, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x7E, 0x18, 0x3F, 0x33, 0x3F, 0x30, 0x30, 0x70, 0xF0, 0xE0, 0x7F, 0x63, 0x7F, 0x63, 0x63, 0x67, 0xE6, 0xC0, 0x99, 0x5A, 0x3C, 0xE7, 0xE7, 0x3C, 0x5A, 0x99, 0x80, 0xE0, 0xF8, 0xFE, 0xF8, 0xE0, 0x80, 0x0, 0x2, 0xE, 0x3E, 0xFE, 0x3E, 0xE, 0x2, 0x0, 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x7E, 0x3C, 0x18, 0x66, 0x66, 0x66, 0x66, 0x66, 0x0, 0x66, 0x0, 0x7F, 0xDB, 0xDB, 0x7B, 0x1B, 0x1B, 0x1B, 0x0, 0x3E, 0x63, 0x38, 0x6C, 0x6C, 0x38, 0xCC, 0x78, 0x0, 0x0, 0x0, 0x0, 0x7E, 0x7E, 0x7E, 0x0, 0x18, 0x3C, 0x7E, 0x18, 0x7E, 0x3C, 0x18, 0xFF, 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x0, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18, 0x0, 0x0, 0x18, 0xC, 0xFE, 0xC, 0x18, 0x0, 0x0, 0x0, 0x30, 0x60, 0xFE, 0x60, 0x30, 0x0, 0x0, 0x0, 0x0, 0xC0, 0xC0, 0xC0, 0xFE, 0x0, 0x0, 0x0, 0x24, 0x66, 0xFF, 0x66, 0x24, 0x0, 0x0, 0x0, 0x18, 0x3C, 0x7E, 0xFF, 0xFF, 0x0, 0x0, 0x0, 0xFF, 0xFF, 0x7E, 0x3C, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x78, 0x78, 0x30, 0x30, 0x0, 0x30, 0x0, 0x6C, 0x6C, 0x6C, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6C, 0x6C, 0xFE, 0x6C, 0xFE, 0x6C, 0x6C, 0x0, 0x30, 0x7C, 0xC0, 0x78, 0xC, 0xF8, 0x30, 0x0, 0x0, 0xC6, 0xCC, 0x18, 0x30, 0x66, 0xC6, 0x0, 0x38, 0x6C, 0x38, 0x76, 0xDC, 0xCC, 0x76, 0x0, 0x60, 0x60, 0xC0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x18, 0x30, 0x60, 0x60, 0x60, 0x30, 0x18, 0x0, 0x60, 0x30, 0x18, 0x18, 0x18, 0x30, 0x60, 0x0, 0x0, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x0, 0x0, 0x0, 0x30, 0x30, 0xFC, 0x30, 0x30, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x60, 0x0, 0x0, 0x0, 0xFC, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x30, 0x30, 0x0, 0x6, 0xC, 0x18, 0x30, 0x60, 0xC0, 0x80, 0x0, 0x7C, 0xC6, 0xCE, 0xDE, 0xF6, 0xE6, 0x7C, 0x0, 0x30, 0x70, 0x30, 0x30, 0x30, 0x30, 0xFC, 0x0, 0x78, 0xCC, 0xC, 0x38, 0x60, 0xCC, 0xFC, 0x0, 0x78, 0xCC, 0xC, 0x38, 0xC, 0xCC, 0x78, 0x0, 0x1C, 0x3C, 0x6C, 0xCC, 0xFE, 0xC, 0x1E, 0x0, 0xFC, 0xC0, 0xF8, 0xC, 0xC, 0xCC, 0x78, 0x0, 0x38, 0x60, 0xC0, 0xF8, 0xCC, 0xCC, 0x78, 0x0, 0xFC, 0xCC, 0xC, 0x18, 0x30, 0x30, 0x30, 0x0, 0x78, 0xCC, 0xCC, 0x78, 0xCC, 0xCC, 0x78, 0x0, 0x78, 0xCC, 0xCC, 0x7C, 0xC, 0x18, 0x70, 0x0, 0x0, 0x30, 0x30, 0x0, 0x0, 0x30, 0x30, 0x0, 0x0, 0x30, 0x30, 0x0, 0x0, 0x30, 0x30, 0x60, 0x18, 0x30, 0x60, 0xC0, 0x60, 0x30, 0x18, 0x0, 0x0, 0x0, 0xFC, 0x0, 0x0, 0xFC, 0x0, 0x0, 0x60, 0x30, 0x18, 0xC, 0x18, 0x30, 0x60, 0x0, 0x78, 0xCC, 0xC, 0x18, 0x30, 0x0, 0x30, 0x0, 0x7C, 0xC6, 0xDE, 0xDE, 0xDE, 0xC0, 0x78, 0x0, 0x30, 0x78, 0xCC, 0xCC, 0xFC, 0xCC, 0xCC, 0x0, 0xFC, 0x66, 0x66, 0x7C, 0x66, 0x66, 0xFC, 0x0, 0x3C, 0x66, 0xC0, 0xC0, 0xC0, 0x66, 0x3C, 0x0, 0xF8, 0x6C, 0x66, 0x66, 0x66, 0x6C, 0xF8, 0x0, 0xFE, 0x62, 0x68, 0x78, 0x68, 0x62, 0xFE, 0x0, 0xFE, 0x62, 0x68, 0x78, 0x68, 0x60, 0xF0, 0x0, 0x3C, 0x66, 0xC0, 0xC0, 0xCE, 0x66, 0x3E, 0x0, 0xCC, 0xCC, 0xCC, 0xFC, 0xCC, 0xCC, 0xCC, 0x0, 0x78, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x0, 0x1E, 0xC, 0xC, 0xC, 0xCC, 0xCC, 0x78, 0x0, 0xE6, 0x66, 0x6C, 0x78, 0x6C, 0x66, 0xE6, 0x0, 0xF0, 0x60, 0x60, 0x60, 0x62, 0x66, 0xFE, 0x0, 0xC6, 0xEE, 0xFE, 0xFE, 0xD6, 0xC6, 0xC6, 0x0, 0xC6, 0xE6, 0xF6, 0xDE, 0xCE, 0xC6, 0xC6, 0x0, 0x38, 0x6C, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x0, 0xFC, 0x66, 0x66, 0x7C, 0x60, 0x60, 0xF0, 0x0, 0x78, 0xCC, 0xCC, 0xCC, 0xDC, 0x78, 0x1C, 0x0, 0xFC, 0x66, 0x66, 0x7C, 0x6C, 0x66, 0xE6, 0x0, 0x78, 0xCC, 0xE0, 0x70, 0x1C, 0xCC, 0x78, 0x0, 0xFC, 0xB4, 0x30, 0x30, 0x30, 0x30, 0x78, 0x0, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xFC, 0x0, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0x78, 0x30, 0x0, 0xC6, 0xC6, 0xC6, 0xD6, 0xFE, 0xEE, 0xC6, 0x0, 0xC6, 0xC6, 0x6C, 0x38, 0x38, 0x6C, 0xC6, 0x0, 0xCC, 0xCC, 0xCC, 0x78, 0x30, 0x30, 0x78, 0x0, 0xFE, 0xC6, 0x8C, 0x18, 0x32, 0x66, 0xFE, 0x0, 0x78, 0x60, 0x60, 0x60, 0x60, 0x60, 0x78, 0x0, 0xC0, 0x60, 0x30, 0x18, 0xC, 0x6, 0x2, 0x0, 0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x78, 0x0, 0x10, 0x38, 0x6C, 0xC6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xFF, 0x30, 0x30, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x78, 0xC, 0x7C, 0xCC, 0x76, 0x0, 0xE0, 0x60, 0x60, 0x7C, 0x66, 0x66, 0xDC, 0x0, 0x0, 0x0, 0x78, 0xCC, 0xC0, 0xCC, 0x78, 0x0, 0x1C, 0xC, 0xC, 0x7C, 0xCC, 0xCC, 0x76, 0x0, 0x0, 0x0, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x0, 0x38, 0x6C, 0x60, 0xF0, 0x60, 0x60, 0xF0, 0x0, 0x0, 0x0, 0x76, 0xCC, 0xCC, 0x7C, 0xC, 0xF8, 0xE0, 0x60, 0x6C, 0x76, 0x66, 0x66, 0xE6, 0x0, 0x30, 0x0, 0x70, 0x30, 0x30, 0x30, 0x78, 0x0, 0xC, 0x0, 0xC, 0xC, 0xC, 0xCC, 0xCC, 0x78, 0xE0, 0x60, 0x66, 0x6C, 0x78, 0x6C, 0xE6, 0x0, 0x70, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x0, 0x0, 0x0, 0xCC, 0xFE, 0xFE, 0xD6, 0xC6, 0x0, 0x0, 0x0, 0xF8, 0xCC, 0xCC, 0xCC, 0xCC, 0x0, 0x0, 0x0, 0x78, 0xCC, 0xCC, 0xCC, 0x78, 0x0, 0x0, 0x0, 0xDC, 0x66, 0x66, 0x7C, 0x60, 0xF0, 0x0, 0x0, 0x76, 0xCC, 0xCC, 0x7C, 0xC, 0x1E, 0x0, 0x0, 0xDC, 0x76, 0x66, 0x60, 0xF0, 0x0, 0x0, 0x0, 0x7C, 0xC0, 0x78, 0xC, 0xF8, 0x0, 0x10, 0x30, 0x7C, 0x30, 0x30, 0x34, 0x18, 0x0, 0x0, 0x0, 0xCC, 0xCC, 0xCC, 0xCC, 0x76, 0x0, 0x0, 0x0, 0xCC, 0xCC, 0xCC, 0x78, 0x30, 0x0, 0x0, 0x0, 0xC6, 0xD6, 0xFE, 0xFE, 0x6C, 0x0, 0x0, 0x0, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0x0, 0x0, 0x0, 0xCC, 0xCC, 0xCC, 0x7C, 0xC, 0xF8, 0x0, 0x0, 0xFC, 0x98, 0x30, 0x64, 0xFC, 0x0, 0x1C, 0x30, 0x30, 0xE0, 0x30, 0x30, 0x1C, 0x0, 0x18, 0x18, 0x18, 0x0, 0x18, 0x18, 0x18, 0x0, 0xE0, 0x30, 0x30, 0x1C, 0x30, 0x30, 0xE0, 0x0, 0x76, 0xDC, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x10, 0x38, 0x6C, 0xC6, 0xC6, 0xFE, 0x0, 0x78, 0xCC, 0xC0, 0xCC, 0x78, 0x18, 0xC, 0x78, 0x0, 0xCC, 0x0, 0xCC, 0xCC, 0xCC, 0x7E, 0x0, 0x1C, 0x0, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x0, 0x7E, 0xC3, 0x3C, 0x6, 0x3E, 0x66, 0x3F, 0x0, 0xCC, 0x0, 0x78, 0xC, 0x7C, 0xCC, 0x7E, 0x0, 0xE0, 0x0, 0x78, 0xC, 0x7C, 0xCC, 0x7E, 0x0, 0x30, 0x30, 0x78, 0xC, 0x7C, 0xCC, 0x7E, 0x0, 0x0, 0x0, 0x78, 0xC0, 0xC0, 0x78, 0xC, 0x38, 0x7E, 0xC3, 0x3C, 0x66, 0x7E, 0x60, 0x3C, 0x0, 0xCC, 0x0, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x0, 0xE0, 0x0, 0x78, 0xCC, 0xFC, 0xC0, 0x78, 0x0, 0xCC, 0x0, 0x70, 0x30, 0x30, 0x30, 0x78, 0x0, 0x7C, 0xC6, 0x38, 0x18, 0x18, 0x18, 0x3C, 0x0, 0xE0, 0x0, 0x70, 0x30, 0x30, 0x30, 0x78, 0x0, 0xC6, 0x38, 0x6C, 0xC6, 0xFE, 0xC6, 0xC6, 0x0, 0x30, 0x30, 0x0, 0x78, 0xCC, 0xFC, 0xCC, 0x0, 0x1C, 0x0, 0xFC, 0x60, 0x78, 0x60, 0xFC, 0x0, 0x0, 0x0, 0x7F, 0xC, 0x7F, 0xCC, 0x7F, 0x0, 0x3E, 0x6C, 0xCC, 0xFE, 0xCC, 0xCC, 0xCE, 0x0, 0x78, 0xCC, 0x0, 0x78, 0xCC, 0xCC, 0x78, 0x0, 0x0, 0xCC, 0x0, 0x78, 0xCC, 0xCC, 0x78, 0x0, 0x0, 0xE0, 0x0, 0x78, 0xCC, 0xCC, 0x78, 0x0, 0x78, 0xCC, 0x0, 0xCC, 0xCC, 0xCC, 0x7E, 0x0, 0x0, 0xE0, 0x0, 0xCC, 0xCC, 0xCC, 0x7E, 0x0, 0x0, 0xCC, 0x0, 0xCC, 0xCC, 0x7C, 0xC, 0xF8, 0xC3, 0x18, 0x3C, 0x66, 0x66, 0x3C, 0x18, 0x0, 0xCC, 0x0, 0xCC, 0xCC, 0xCC, 0xCC, 0x78, 0x0, 0x18, 0x18, 0x7E, 0xC0, 0xC0, 0x7E, 0x18, 0x18, 0x38, 0x6C, 0x64, 0xF0, 0x60, 0xE6, 0xFC, 0x0, 0xCC, 0xCC, 0x78, 0xFC, 0x30, 0xFC, 0x30, 0x30, 0xF8, 0xCC, 0xCC, 0xFA, 0xC6, 0xCF, 0xC6, 0xC7, 0xE, 0x1B, 0x18, 0x3C, 0x18, 0x18, 0xD8, 0x70, 0x1C, 0x0, 0x78, 0xC, 0x7C, 0xCC, 0x7E, 0x0, 0x38, 0x0, 0x70, 0x30, 0x30, 0x30, 0x78, 0x0, 0x0, 0x1C, 0x0, 0x78, 0xCC, 0xCC, 0x78, 0x0, 0x0, 0x1C, 0x0, 0xCC, 0xCC, 0xCC, 0x7E, 0x0, 0x0, 0xF8, 0x0, 0xF8, 0xCC, 0xCC, 0xCC, 0x0, 0xFC, 0x0, 0xCC, 0xEC, 0xFC, 0xDC, 0xCC, 0x0, 0x3C, 0x6C, 0x6C, 0x3E, 0x0, 0x7E, 0x0, 0x0, 0x38, 0x6C, 0x6C, 0x38, 0x0, 0x7C, 0x0, 0x0, 0x30, 0x0, 0x30, 0x60, 0xC0, 0xCC, 0x78, 0x0, 0x0, 0x0, 0x0, 0xFC, 0xC0, 0xC0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xFC, 0xC, 0xC, 0x0, 0x0, 0xC3, 0xC6, 0xCC, 0xDE, 0x33, 0x66, 0xCC, 0xF, 0xC3, 0xC6, 0xCC, 0xDB, 0x37, 0x6F, 0xCF, 0x3, 0x18, 0x18, 0x0, 0x18, 0x18, 0x18, 0x18, 0x0, 0x0, 0x33, 0x66, 0xCC, 0x66, 0x33, 0x0, 0x0, 0x0, 0xCC, 0x66, 0x33, 0x66, 0xCC, 0x0, 0x0, 0x22, 0x88, 0x22, 0x88, 0x22, 0x88, 0x22, 0x88, 0x55, 0xAA, 0x55, 0xAA, 0x55, 0xAA, 0x55, 0xAA, 0xDB, 0x77, 0xDB, 0xEE, 0xDB, 0x77, 0xDB, 0xEE, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xF8, 0x18, 0x18, 0x18, 0x18, 0x18, 0xF8, 0x18, 0xF8, 0x18, 0x18, 0x18, 0x36, 0x36, 0x36, 0x36, 0xF6, 0x36, 0x36, 0x36, 0x0, 0x0, 0x0, 0x0, 0xFE, 0x36, 0x36, 0x36, 0x0, 0x0, 0xF8, 0x18, 0xF8, 0x18, 0x18, 0x18, 0x36, 0x36, 0xF6, 0x6, 0xF6, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x0, 0x0, 0xFE, 0x6, 0xF6, 0x36, 0x36, 0x36, 0x36, 0x36, 0xF6, 0x6, 0xFE, 0x0, 0x0, 0x0, 0x36, 0x36, 0x36, 0x36, 0xFE, 0x0, 0x0, 0x0, 0x18, 0x18, 0xF8, 0x18, 0xF8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xF8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1F, 0x0, 0x0, 0x0, 0x18, 0x18, 0x18, 0x18, 0xFF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xFF, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1F, 0x18, 0x18, 0x18, 0x0, 0x0, 0x0, 0x0, 0xFF, 0x0, 0x0, 0x0, 0x18, 0x18, 0x18, 0x18, 0xFF, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1F, 0x18, 0x1F, 0x18, 0x18, 0x18, 0x36, 0x36, 0x36, 0x36, 0x37, 0x36, 0x36, 0x36, 0x36, 0x36, 0x37, 0x30, 0x3F, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3F, 0x30, 0x37, 0x36, 0x36, 0x36, 0x36, 0x36, 0xF7, 0x0, 0xFF, 0x0, 0x0, 0x0, 0x0, 0x0, 0xFF, 0x0, 0xF7, 0x36, 0x36, 0x36, 0x36, 0x36, 0x37, 0x30, 0x37, 0x36, 0x36, 0x36, 0x0, 0x0, 0xFF, 0x0, 0xFF, 0x0, 0x0, 0x0, 0x36, 0x36, 0xF7, 0x0, 0xF7, 0x36, 0x36, 0x36, 0x18, 0x18, 0xFF, 0x0, 0xFF, 0x0, 0x0, 0x0, 0x36, 0x36, 0x36, 0x36, 0xFF, 0x0, 0x0, 0x0, 0x0, 0x0, 0xFF, 0x0, 0xFF, 0x18, 0x18, 0x18, 0x0, 0x0, 0x0, 0x0, 0xFF, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x3F, 0x0, 0x0, 0x0, 0x18, 0x18, 0x1F, 0x18, 0x1F, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1F, 0x18, 0x1F, 0x18, 0x18, 0x18, 0x0, 0x0, 0x0, 0x0, 0x3F, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0xFF, 0x36, 0x36, 0x36, 0x18, 0x18, 0xFF, 0x18, 0xFF, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xF8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1F, 0x18, 0x18, 0x18, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x0, 0x0, 0x0, 0x0, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF, 0xF, 0xF, 0xF, 0xF, 0xF, 0xF, 0xF, 0xFF, 0xFF, 0xFF, 0xFF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x76, 0xDC, 0xC8, 0xDC, 0x76, 0x0, 0x0, 0x78, 0xCC, 0xF8, 0xCC, 0xF8, 0xC0, 0xC0, 0x0, 0xFC, 0xCC, 0xC0, 0xC0, 0xC0, 0xC0, 0x0, 0x0, 0xFE, 0x6C, 0x6C, 0x6C, 0x6C, 0x6C, 0x0, 0xFC, 0xCC, 0x60, 0x30, 0x60, 0xCC, 0xFC, 0x0, 0x0, 0x0, 0x7E, 0xD8, 0xD8, 0xD8, 0x70, 0x0, 0x0, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x60, 0xC0, 0x0, 0x76, 0xDC, 0x18, 0x18, 0x18, 0x18, 0x0, 0xFC, 0x30, 0x78, 0xCC, 0xCC, 0x78, 0x30, 0xFC, 0x38, 0x6C, 0xC6, 0xFE, 0xC6, 0x6C, 0x38, 0x0, 0x38, 0x6C, 0xC6, 0xC6, 0x6C, 0x6C, 0xEE, 0x0, 0x1C, 0x30, 0x18, 0x7C, 0xCC, 0xCC, 0x78, 0x0, 0x0, 0x0, 0x7E, 0xDB, 0xDB, 0x7E, 0x0, 0x0, 0x6, 0xC, 0x7E, 0xDB, 0xDB, 0x7E, 0x60, 0xC0, 0x38, 0x60, 0xC0, 0xF8, 0xC0, 0x60, 0x38, 0x0, 0x78, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0x0, 0x0, 0xFC, 0x0, 0xFC, 0x0, 0xFC, 0x0, 0x0, 0x30, 0x30, 0xFC, 0x30, 0x30, 0x0, 0xFC, 0x0, 0x60, 0x30, 0x18, 0x30, 0x60, 0x0, 0xFC, 0x0, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0, 0xFC, 0x0, 0xE, 0x1B, 0x1B, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xD8, 0xD8, 0x70, 0x30, 0x30, 0x0, 0xFC, 0x0, 0x30, 0x30, 0x0, 0x0, 0x76, 0xDC, 0x0, 0x76, 0xDC, 0x0, 0x0, 0x38, 0x6C, 0x6C, 0x38, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x18, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x18, 0x0, 0x0, 0x0, 0xF, 0xC, 0xC, 0xC, 0xEC, 0x6C, 0x3C, 0x1C, 0x78, 0x6C, 0x6C, 0x6C, 0x6C, 0x0, 0x0, 0x0, 0x70, 0x18, 0x30, 0x60, 0x78, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3C, 0x3C, 0x3C, 0x3C, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 };

void _draw_char(unsigned int start_x, unsigned int start_y, unsigned char c, uint8_t fg, uint8_t bg) {
	if (c == '\n')
		return;

	for (unsigned int y = 0; y < 8; y++)
	{
		unsigned char rowData = font_data[c * 8 + y];
		for (unsigned int x = 0; x < 8; x++)
		{
			bool on = (rowData & 0x80) == 0x80;
			screen_set_320(x + start_x, y + start_y, on ? fg : bg);
			rowData = rowData << 1;
		}
	}
}

void _draw_text(uint8_t* row, uint8_t* col, const char* text, uint8_t fg, uint8_t bg) {
	unsigned int i = 0;
	uint8_t num_buffer = 0;

	while (1) {
		char c = text[i++];
		if (c == '%') {
			char mode = text[i++];
			num_buffer = 0;
			while (1) {
				c = text[i++];
				if (c < '0' || c > '9') {
					break;
				}
				num_buffer = (num_buffer * 10) + (c - '0');
			}

			switch (mode) {
			case 'v': { // Variable
				int pad = 0;
				if (c == '|') {
					while (1) {
						c = text[i++];
						if (c < '0' || c > '9') {
							break;
						}
						pad = (pad * 10) + (c - '0');
					}
				}
				char buf[8];
				sprintf(buf, "%0*d", pad, state.variables[num_buffer]);
				_draw_text(row, col, buf, fg, bg);
				break;
			}
			case 's': { // String
				char* str = state.strings[num_buffer];
				_draw_text(row, col, str, fg, bg);
				break;
			}
			case 'm': { // Message
				char* msg = _get_message(num_buffer);
				_draw_text(row, col, msg, fg, bg);
				break;
			}
			}
		}
		
		if (c == '\0') {
			break;
		}
		else if (c == '\n') {
			(*row)++;
			(*col) = 0;
		}
		else {
			_draw_char((*col) * 8, (*row) * 8, c, fg, bg);
			(*col)++;
		}
	}
}

void _redraw_prompt() {	
	uint8_t row = state.input_line_row;
	uint8_t col = 2;
	_draw_text(&row, &col, "                                        ", 0, 0);
	
	_draw_char(0, state.input_line_row * 8, state.strings[0][0], 15, 0);
	_draw_char((1 + state.input_pos) * 8, state.input_line_row * 8, state.cursor_char, 15, 0);

	row = state.input_line_row;
	col = 1;
	_draw_text(&row, &col, state.input_buffer, 15, 0);
}